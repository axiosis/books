\chapter{Вступ}

Система автоматизації підприємства ERP.UNO визначає формальну бізнес
специфікацію та її імплементацію для сучасних оптимізованих підприємств
які прагнуть стабільності та довершеності, не втрачаючи при цьому повноти
визначеності та відповідності реальним умовам та потребам. Телекомунікаційна
платформа Erlang/OTP від Ericsson успішно застосовується в індустрії
мобільними операторами понад 30 років, а її віртуальна машина досі
вважається однією з найкращих в галузі. Системи ERP на її базі також
уже не один рік використовується у банківській сфері, процесінгу транзакцій,
розподілених системах повідомлень, в IoT секторі. Ви можете переглянути демо
модулі системи ERP.UNO в нашому захищеному середовищі n2o.cloud зі своїм
центром випуску ECC X.509 сертифікатів. На цій сторінці ви знайдете
перелік модулів системи та основні сутності схеми.

\section{Модулі підприємства}

SYNRC Підприємство є комплексом бібліотек&#160;(N2O.DEV) та підсистем
           додатків&#160;(N2O.SPACE), який використовує загальну шину і загальну
           розподілену базу даних.Перша глава дає огляд існуючих рішень та вступ до предмету формальної верифікації.

\textbf{LDAP} — Сервер аутентифікації, зберігання ключів та директорія підприємства.

\textbf{ERP} — Даний модуль зберігає основну ієрархічну структуру
        підприємства, її схему, записи про персонал, інвентар, компанії
        та офіси підприємства.

\textbf{FIN} — Фінансовий модуль підприємства, зберігає бізнес процеси,
        які представляють собою рахунки учасників системи: персонал (для нарахування зарплат),
        рахунки та субрахунки підприємства (для здійснення економічної діяльності) і
        зовнішні рахунки в платіжних системах.

\textbf{ACC} — Система управління персоналом: зарплатні відомості,
        календар підприємства, відпустки, декретні відпустки, інші календарі.

\textbf{SCM} — Система управління ланцюжком поставок: головний БП системи —
           експедиційний процес доставки товарів ланцюжку одержувачів
           за допомогою транспортних компаній.

\textbf{CRM} — Система управління клієнтами: являє собою розширення більш
           абстрактного додатку CHAT.

\textbf{PLM} — Система управління життєвим циклом проектів і продуктів.
           Також містить CashFlow та P&#38;L звіти.

\textbf{PM} — Система управління проектами підприємства з деталізацією
           часу і протоколів прийому-передачі (прийняті коміти в гитхабі).

\textbf{WMS} — Система управління складом.

\textbf{TMS} — Система управління транспортом підприємства.

\section{Управління ресурсами}

Головним чином інформаційна структура нашого підприємства
           складається з обчислювальних ресурсов (додатки, запущені в шині)
           та накопичувальних ресурсів (дані, збережені в базі даних).

SOA архітектура в якості моделі управління обчислювальними
           ресурсами пропонує асинхронний протокол віддаленого виклику на шинах.
           Разом з N2O можно використовувати MQTT та інші шини, за допомогою наступних протоколів: TCP, WebSocket.
           Ці асинхронні протоколи часто називають
           протоколами реального часу, оскільки в них функції відправки повідомлень завжди
           миттєво повертають результат. Що ж стосується протоколів для публікації і доступу
           до даних, то тут може виявитися доречним використання синхронного HTTP протоколу.

\section{Обчислювальні ресурси}

        Для SOA архітектури традиційно використовуються асинхронні
           протоколи доступу до обчислювальних ресурсів. Зазвичай це серверні
           воркери, які підключені до шини і обслуговують API певного додатку.
           Кожен додаток має власне консистентне хеш-кільце воркерів. В мережі
           одночасно працює багато кілець-додатків.

   \begin{lstlisting}
config :n2o,
  tcp_services: ['ldap'],
  ws_services: ['chat'],
  mqtt_services: ['erp', 'bpe']
   \end{lstlisting}

        За допомогою <b>config.exs</b> файлу можна налаштувати необхідну
           конфігурацію серії консистентних кілець, кожне з яких працює
           на власному транспортному протоколі. В даному прикладі показано
           карту Erlang серверів, які обслуговують черги додатків в шині:

\begin{lstlisting}
> PLM.vnodes
[
  {{:tcp, '/ldap/tcp/4'}, [:n2o_tcp]},
  {{:tcp, '/ldap/tcp/3'}, [:n2o_tcp]},
  {{:tcp, '/ldap/tcp/2'}, [:n2o_tcp]},
  {{:tcp, '/ldap/tcp/1'}, [:n2o_tcp]},
  {{:ws, '/chat/ws/4'}, [:n2o_ws]},
  {{:ws, '/chat/ws/3'}, [:n2o_ws]},
  {{:ws, '/chat/ws/2'}, [:n2o_ws]},
  {{:ws, '/chat/ws/1'}, [:n2o_ws]},
  {{:mqtt, '/erp/mqtt/4'}, [:n2o_mqtt]},
  {{:mqtt, '/erp/mqtt/3'}, [:n2o_mqtt]},
  {{:mqtt, '/erp/mqtt/2'}, [:n2o_mqtt]},
  {{:mqtt, '/erp/mqtt/1'}, [:n2o_mqtt]},
  {{:mqtt, '/bpe/mqtt/4'}, [:n2o_mqtt]},
  {{:mqtt, '/bpe/mqtt/3'}, [:n2o_mqtt]},
  {{:mqtt, '/bpe/mqtt/2'}, [:n2o_mqtt]},
  {{:mqtt, '/bpe/mqtt/1'}, [:n2o_mqtt]},
  {{:caching, 'timer'}, [:n2o]}
]
\end{lstlisting}

        Завдяки такій деталізації можна проектувати гетерогенні системи,
           включаючи необхідний набір протоколів на портах потрібних машин. Ця же система
           дозволяє отримати балансування навантаження, підключаючи фізичні ресурси
           до певних черг шини даних.

        В нашій моделі асинхронні протоколи використовуються для управління
           обчислювальними ресурсами підприємства.

\section{Накопичувальні ресурси}

        Розподілені хеш-кільця використовуються не тільки для розподілених обчислень,
           але і для зберігання даних.
           Деякі бази даних, наприклад RocksDB та Cassandra, використовують глобальний простір
           ключів для даних (на відміну від таблично-орієнтованих баз). Саме для таких
           баз і створено библиотеку KVS, де в якості синхронного транзакційного
           інтерфейсу — API ланцюжків з гарантією консистентності. Нижче
           наведено приклад структури ланцюжків екземпляру системи PLM:

   \begin{lstlisting}
> :kvs.all :writer
[
  {:writer, '/bpe/proc', 2},
  {:writer, '/erp/group', 1},
  {:writer, '/erp/partners', 7},
  {:writer, '/acc/synrc/Kyiv', 3},
  {:writer, '/chat/5HT', 1},
  {:writer, '/bpe/hist/1562187187807717000', 8},
  {:writer, '/bpe/hist/1562192587632329000', 1}
]
    \end{lstlisting}

        В нашій моделі синхронні протоколи використовуються для управління
           накопичувальними ресурсами підприємства і транзакційного процесингу.

        \section{Типові специфікації}

        Протоколи визначаються типовими специфікаціями і генеруються для наступних мов:
           Java, Swift, JavaScript, Google Protobuf V3, ASN.1. Також ми генеруємо валідатори даних по цих
           типових анотаціях і вбудовуємо ці валідатори в тракт наших розподілених протоколів,
           тому ми ніколи не дозволимо клієнтам зіпсувати сторадж. Для веб додатків у нас развинута
           система валідації — як для JavaScript, так і на стороні сервера. Бізнес логіка повністью ізольована в нашій
           системі управління бізнес процесами, де кожен бізнес процесс
           є процесом віртуальної машини. Всі ланцюжки модифікуються атомарним чином,
           підтримують flake адресацію, і не вимагають додаткової ізоляції
           у своєму примітивному використанні.
           Тому ви можете трактувати базу як розподілений кеш
           і використовувати її з фронт додатків для примітивних випадків.
